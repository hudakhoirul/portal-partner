<div id="registration-claim" class="p-16">
    <dx-box
        direction="col"
        width="100%"
        height="50"
        class="rect">
        <dxi-item
            [ratio]="1"
            class="title">
            Registration New Claim
        </dxi-item>
    </dx-box>

    <dx-tab-panel
        #tabPanel
        [dataSource]="companies"
        [selectedIndex]="0"
        [loop]="false"
        [animationEnabled]="true"
        [swipeEnabled]="true"
        class="mt-16"
    >
        <div *dxTemplate="let company of 'title'">
            <span *ngIf="company.ID===1">Claim Information</span>
            <span *ngIf="company.ID===2">Claim Documents</span>
            <span *ngIf="company.ID===3">History Process</span>
        </div>
        <div *dxTemplate="let company of 'item'">
            <div class="tabpanel-item p-16" *ngIf="company.ID===3">
                <div class="widget-container">
                    <dx-form id="form"
                        colCount="2"
                        [formData]="employee">
                        <dxi-item dataField="product" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
                            <dxi-validation-rule type="required" message="Product is required"></dxi-validation-rule>
                        </dxi-item>
                        <dxi-item dataField="insuredName">
                            <dxi-validation-rule type="required" message="Insured name is required"></dxi-validation-rule>
                        </dxi-item>
                        
                        <dxi-item dataField="idMemberPartner">
                            <dxi-validation-rule type="required" message="ID member partner is required"></dxi-validation-rule>
                        </dxi-item>
                        <dxi-item dataField="ktpNo">
                            <dxi-validation-rule type="required" message="KTP No is required"></dxi-validation-rule>
                        </dxi-item>
                        <dxi-item itemType="EmptyItem"></dxi-item>
                        <dxi-item dataField="birthOfDate" editorType="dxDateBox" [editorOptions]="{ width: '100%' }">
                            <dxi-validation-rule type="required" message="Birth of date is required"></dxi-validation-rule>
                        </dxi-item>
                        <dxi-item itemType="EmptyItem"></dxi-item>
                        <dxi-item itemType="EmptyItem" style="float: right">
                            <dx-button
                                text="Search"
                                type="success">
                            </dx-button>
                            <dx-button
                                style="margin-left: 10px"
                                text="Reset">
                            </dx-button>
                        </dxi-item>
                    </dx-form>
                </div>
                <div class="widget-container mt-16">
                    <dx-data-grid
                        id="gridContainer"
                        [dataSource]="claimRegistration"
                        [columns]="[
                        'insuredNo',
                        'insuredName',
                        'ktpNo',
                        'birthOfDate',
                        'idMemberPartner',
                        'polis',
                        'insurancePeriod',
                        'currency',
                        'sumAssured']"
                        [showBorders]="true"
                        [allowColumnReordering]="true"
                        [rowAlternationEnabled]="true"
                        style="padding: 10px; background-color: white;">
                        <dxi-column dataField="action" cellTemplate="actionTemplate"></dxi-column>
                        <dxi-column dataField="insuredNo"></dxi-column>
                        <dxi-column dataField="insuredName"></dxi-column>
                        <dxi-column dataField="ktpNo"></dxi-column>
                        <dxi-column dataField="birthOfDate" dataType="datetime" ></dxi-column>
                        <dxi-column dataField="idMemberPartner"></dxi-column>
                        <dxi-column dataField="polis"></dxi-column>
                        <dxi-column dataField="insurancePeriod"></dxi-column>
                        <dxi-column dataField="currency"></dxi-column>
                        <dxi-column dataField="sumAssured"></dxi-column>

                        <div *dxTemplate="let data of 'actionTemplate'" style="text-align: center;">
                            <a style="cursor: pointer" routerLink="/register-claim/CL0001">Select</a>
                        </div>
                        <dxo-paging [pageSize]="1"></dxo-paging>
                        <dxo-pager
                            [showPageSizeSelector]="true"
                            [allowedPageSizes]="[10, 25, 50, 100]"
                        ></dxo-pager>
                        <dxo-search-panel
                            [visible]="true"
                            [highlightCaseSensitive]="true"
                        ></dxo-search-panel>
                        <dxo-grouping
                            [autoExpandAll]="false"
                        ></dxo-grouping>
                    </dx-data-grid>
                </div>
            </div>
            <div class="tabpanel-item p-16" *ngIf="company.ID===1">
                <div class="widget-container">
                    <dx-form id="form"
                        [formData]="employee">
                        <dxi-item itemType="group" caption="Participant Information"
                        colCount="2">
                            <dxi-item dataField="participant" [editorOptions]="{ disabled: true }"></dxi-item>
                            <dxi-item dataField="idMemberPartner" [editorOptions]="{ disabled: true }"></dxi-item>

                            <dxi-item dataField="participantNo" [editorOptions]="{ disabled: true }"></dxi-item>
                            <dxi-item dataField="policyNo" [editorOptions]="{ disabled: true }"></dxi-item>

                            <dxi-item dataField="mobileNo" [editorOptions]="{ disabled: true }"></dxi-item>
                            <dxi-item dataField="product" [editorOptions]="{ disabled: true }"></dxi-item>

                            <dxi-item dataField="emailAddress" [editorOptions]="{ disabled: true }"></dxi-item>
                            <dxi-item dataField="insurancePeriod" [editorOptions]="{ disabled: true }"></dxi-item>
                        </dxi-item>

                        <dxi-item itemType="group" caption="Claim Information"
                        colCount="2">
                            <dxi-item dataField="eventDate" editorType="dxDateBox" [editorOptions]="{ width: '100%' }">
                                <dxi-validation-rule type="required" message="Event date is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="claimType" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
                                <dxi-validation-rule type="required" message="Claim type is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="claimAmount">
                                <dxi-validation-rule type="required" message="Claim amount is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="illness" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }"></dxi-item>
                        </dxi-item>

                        <dxi-item itemType="group" caption="Claimant Information"
                        colCount="2">
                            <dxi-item itemType="EmptyItem">
                                <div class="dx-field">
                                    <div class="dx-field-label">Is insured</div>
                                    <div class="dx-field-value" style="float: left">
                                        <dx-radio-group
                                            [items]="[
                                                'Yes', 
                                                'No'
                                            ]"
                                            [value]="'No'"
                                            layout="horizontal">
                                        </dx-radio-group>
                                    </div>
                                </div>
                            </dxi-item>
                            <dxi-item itemType="EmptyItem"></dxi-item>
                            <dxi-item dataField="claimantName">
                                <dxi-validation-rule type="required" message="Claimant name is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="phoneNo">
                                <dxi-validation-rule type="required" message="Phone No is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="relationship" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
                                <dxi-validation-rule type="required" message="Relationship is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="emailAddress">
                                <dxi-validation-rule type="required" message="Email address is required"></dxi-validation-rule>
                            </dxi-item>
                        </dxi-item>

                        <dxi-item itemType="group" caption="Benetifiery Information"
                        colCount="2">
                            <dxi-item dataField="benetifiery">
                                <dxi-validation-rule type="required" message="Benetifiery is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="benetifieryKtpNo"></dxi-item>
                            <dxi-item dataField="relationshipBenetifiery" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
                                <dxi-validation-rule type="required" message="Relationship is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="familyCardNo"></dxi-item>
                        </dxi-item>

                        <dxi-item itemType="group" caption="Bank Account Information"
                        colCount="2">
                            <dxi-item dataField="accountNo">
                                <dxi-validation-rule type="required" message="Account No is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="currency">
                                <dxi-validation-rule type="required" message="Currency is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="Bank" editorType="dxSelectBox" [editorOptions]="{ items: positions, value: '' }">
                                <dxi-validation-rule type="required" message="Bank is required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="accountName">
                                <dxi-validation-rule type="required" message="Account name is required"></dxi-validation-rule>
                            </dxi-item>
                        </dxi-item>
                    </dx-form>
                </div>
                
                <div class="my-16" style="float: right">
                    <dx-button
                        text="Prev"
                        type="success">
                    </dx-button>
                    <dx-button
                        style="margin-left: 10px"
                        text="Next"
                        type="success">
                    </dx-button>
                </div>
            </div>
            <div class="tabpanel-item p-16" *ngIf="company.ID===2">
                <div class="widget-container">

                    <dx-button
                        class="mb-16"
                        text="Delete"
                        type="danger">
                    </dx-button>

                    <dx-data-grid id="gridContainer"
                        [dataSource]="claimDocument"
                        [masterDetail]="{ enabled: true, template: 'detail' }"
                        keyExpr="no"
                        [showBorders]="true">

                        <dxi-column dataField="no" [width]="100"></dxi-column>
                        <dxi-column dataField="documentName"></dxi-column>
                        <dxi-column dataField="condition" [width]="150"></dxi-column>
                        <dxi-column dataField="documentUploaded" [width]="150"></dxi-column>
                        <dxi-column dataField="documentUploaded" [width]="150"></dxi-column>

                        <div *dxTemplate="let employee of 'detail'">
                            <!-- <div class="master-detail-caption">{{employee.data.documentName}}</div> -->
                            <dx-data-grid 
                                [dataSource]="claimDocumentDetail"
                                [showBorders]="true"
                                [columnAutoWidth]="true">

                                <dxo-selection
                                    selectAllMode="page"
                                    showCheckBoxesMode="always"
                                    mode="multiple"
                                ></dxo-selection>

                                <dxi-column dataField="action" [width]="200" cellTemplate="actionTemplate"></dxi-column>
                                <dxi-column dataField="fileName"></dxi-column>
                                <dxi-column dataField="uploadBy" [width]="100"></dxi-column>
                                <dxi-column dataField="uploadDate" dataType="datetime" [width]="150"></dxi-column>

                                <div *dxTemplate="let data of 'actionTemplate'" style="text-align: center;">
                                    <dx-button
                                        text="View"
                                        type="success">
                                    </dx-button>
                                    <dx-button
                                        style="margin-left: 10px"
                                        text="Delete"
                                        type="danger">
                                    </dx-button>
                                </div>
                            </dx-data-grid>       
                        </div>
                    </dx-data-grid>
                </div>
                
                <div class="py-16" style="float: right">
                    <dx-button
                        text="Prev"
                        type="success">
                    </dx-button>
                    <dx-button
                        style="margin-left: 10px"
                        text="Submit"
                        type="success">
                    </dx-button>
                </div>
            </div>
        </div>
    </dx-tab-panel>
</div>
